{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useRef } from \"react\";\nimport { useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\n\n// Helper component to add/remove weather overlays\nfunction WeatherLayer({\n  type,\n  visible\n}) {\n  _s();\n  const map = useMap();\n  const layerRef = useRef();\n  React.useEffect(() => {\n    if (!visible) {\n      if (layerRef.current) {\n        map.removeLayer(layerRef.current);\n        layerRef.current = null;\n      }\n      return;\n    }\n    let url = \"\";\n    if (type === \"clouds\") url = `http://localhost:8081/api/weather-tile/clouds_new/{z}/{x}/{y}.png`;\n    if (type === \"wind\") url = `http://localhost:8081/api/weather-tile/wind_new/{z}/{x}/{y}.png`;\n    if (type === \"pressure\") url = `http://localhost:8081/api/weather-tile/pressure_new/{z}/{x}/{y}.png`;\n\n    // Create the weather tile layer\n    const L = window.L || require(\"leaflet\");\n    const weatherLayer = L.tileLayer(url, {\n      opacity: 1,\n      attribution: 'Map data &copy; <a href=\"http://openweathermap.org\">OpenWeatherMap</a>',\n      maxZoom: 19\n    });\n    weatherLayer.addTo(map);\n    layerRef.current = weatherLayer;\n\n    // Cleanup on unmount or when toggling\n    return () => {\n      if (layerRef.current) {\n        map.removeLayer(layerRef.current);\n        layerRef.current = null;\n      }\n    };\n  }, [type, visible, map]);\n  return null;\n}\n_s(WeatherLayer, \"LR6fCoKp6DG6vEMgQU9yy7rIuMU=\", false, function () {\n  return [useMap];\n});\n_c = WeatherLayer;\nexport default WeatherLayer;\nvar _c;\n$RefreshReg$(_c, \"WeatherLayer\");","map":{"version":3,"names":["React","useRef","useMap","L","WeatherLayer","type","visible","_s","map","layerRef","useEffect","current","removeLayer","url","window","require","weatherLayer","tileLayer","opacity","attribution","maxZoom","addTo","_c","$RefreshReg$"],"sources":["C:/proiecte_pro/CPDLC-simulator/cpdlc-frontend/src/components/Weather/WeatherLayer.js"],"sourcesContent":["import React, { useRef } from \"react\";\r\nimport { useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\n\r\n// Helper component to add/remove weather overlays\r\nfunction WeatherLayer({ type, visible }) {\r\n  const map = useMap();\r\n  const layerRef = useRef();\r\n\r\n  React.useEffect(() => {\r\n    if (!visible) {\r\n      if (layerRef.current) {\r\n        map.removeLayer(layerRef.current);\r\n        layerRef.current = null;\r\n      }\r\n      return;\r\n    }\r\n\r\n    let url = \"\";\r\n   if (type === \"clouds\")\r\n    url = `http://localhost:8081/api/weather-tile/clouds_new/{z}/{x}/{y}.png`;\r\n  if (type === \"wind\")\r\n    url = `http://localhost:8081/api/weather-tile/wind_new/{z}/{x}/{y}.png`;\r\n  if (type === \"pressure\")\r\n    url = `http://localhost:8081/api/weather-tile/pressure_new/{z}/{x}/{y}.png`;\r\n\r\n    // Create the weather tile layer\r\n    const L = window.L || require(\"leaflet\");\r\n    const weatherLayer = L.tileLayer(url, {\r\n      opacity: 1,\r\n      attribution: 'Map data &copy; <a href=\"http://openweathermap.org\">OpenWeatherMap</a>',\r\n      maxZoom: 19,\r\n    });\r\n\r\n    weatherLayer.addTo(map);\r\n    layerRef.current = weatherLayer;\r\n\r\n    // Cleanup on unmount or when toggling\r\n    return () => {\r\n      if (layerRef.current) {\r\n        map.removeLayer(layerRef.current);\r\n        layerRef.current = null;\r\n      }\r\n    };\r\n  }, [type, visible, map]);\r\n\r\n  return null;\r\n}\r\nexport default WeatherLayer;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,MAAM,QAAQ,OAAO;AACrC,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,CAAC,MAAM,SAAS;;AAEvB;AACA,SAASC,YAAYA,CAAC;EAAEC,IAAI;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EACvC,MAAMC,GAAG,GAAGN,MAAM,CAAC,CAAC;EACpB,MAAMO,QAAQ,GAAGR,MAAM,CAAC,CAAC;EAEzBD,KAAK,CAACU,SAAS,CAAC,MAAM;IACpB,IAAI,CAACJ,OAAO,EAAE;MACZ,IAAIG,QAAQ,CAACE,OAAO,EAAE;QACpBH,GAAG,CAACI,WAAW,CAACH,QAAQ,CAACE,OAAO,CAAC;QACjCF,QAAQ,CAACE,OAAO,GAAG,IAAI;MACzB;MACA;IACF;IAEA,IAAIE,GAAG,GAAG,EAAE;IACb,IAAIR,IAAI,KAAK,QAAQ,EACpBQ,GAAG,GAAG,mEAAmE;IAC3E,IAAIR,IAAI,KAAK,MAAM,EACjBQ,GAAG,GAAG,iEAAiE;IACzE,IAAIR,IAAI,KAAK,UAAU,EACrBQ,GAAG,GAAG,qEAAqE;;IAE3E;IACA,MAAMV,CAAC,GAAGW,MAAM,CAACX,CAAC,IAAIY,OAAO,CAAC,SAAS,CAAC;IACxC,MAAMC,YAAY,GAAGb,CAAC,CAACc,SAAS,CAACJ,GAAG,EAAE;MACpCK,OAAO,EAAE,CAAC;MACVC,WAAW,EAAE,wEAAwE;MACrFC,OAAO,EAAE;IACX,CAAC,CAAC;IAEFJ,YAAY,CAACK,KAAK,CAACb,GAAG,CAAC;IACvBC,QAAQ,CAACE,OAAO,GAAGK,YAAY;;IAE/B;IACA,OAAO,MAAM;MACX,IAAIP,QAAQ,CAACE,OAAO,EAAE;QACpBH,GAAG,CAACI,WAAW,CAACH,QAAQ,CAACE,OAAO,CAAC;QACjCF,QAAQ,CAACE,OAAO,GAAG,IAAI;MACzB;IACF,CAAC;EACH,CAAC,EAAE,CAACN,IAAI,EAAEC,OAAO,EAAEE,GAAG,CAAC,CAAC;EAExB,OAAO,IAAI;AACb;AAACD,EAAA,CA1CQH,YAAY;EAAA,QACPF,MAAM;AAAA;AAAAoB,EAAA,GADXlB,YAAY;AA2CrB,eAAeA,YAAY;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}