{"ast":null,"code":"var _jsxFileName = \"D:\\\\downloads\\\\proiecte_programare\\\\CPDLC_simulator\\\\cpdlc-frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport MapContainer from \"./components/Map/MapContainer\";\nimport WeatherControls from \"./components/Weather/WeatherControls\";\nimport WeatherLayer from \"./components/WeatherLayer\";\nimport AircraftLayer from \"./components/Aircraft/AircraftLayer\";\nimport L from \"leaflet\";\nimport \"leaflet-rotatedmarker\"; // plugin must be imported after leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialPlanes = [{\n  icao: \"LZIB\",\n  flight_level: 350,\n  lat: 44.57,\n  lng: 27.48,\n  heading: 90,\n  speed: 450,\n  callsign: \"BUL123\",\n  trail: [[44.57, 27.48]]\n}, {\n  icao: \"A320\",\n  flight_level: 320,\n  lat: 44.87,\n  lng: 26.48,\n  heading: 270,\n  speed: 430,\n  callsign: \"BUL456\",\n  trail: [[44.87, 26.48]]\n}, {\n  icao: \"B737\",\n  flight_level: 300,\n  lat: 44.57,\n  lng: 25.48,\n  heading: 180,\n  speed: 400,\n  callsign: \"BUL789\",\n  trail: [[44.57, 25.48]]\n}, {\n  icao: \"C172\",\n  flight_level: 100,\n  lat: 45.57,\n  lng: 24.48,\n  heading: 0,\n  speed: 120,\n  callsign: \"BUL101\",\n  trail: [[45.57, 24.48]]\n}, {\n  icao: \"E190\",\n  flight_level: 280,\n  lat: 45.57,\n  lng: 23.48,\n  heading: 45,\n  speed: 500,\n  callsign: \"BUL202\",\n  trail: [[45.57, 23.48]]\n}];\nconst App = () => {\n  _s();\n  const [weatherState, setWeatherState] = useState({\n    clouds: false,\n    wind: false,\n    pressure: false\n  });\n  const [planes, setPlanes] = useState(initialPlanes);\n  const [selectedCallsign, setSelectedCallsign] = useState(null);\n\n  // Icon (poți înlocui cu local asset dacă vrei)\n  const planeIcon = new L.Icon({\n    iconUrl: \"https://icones.pro/wp-content/uploads/2021/08/symbole-d-avion-et-de-voyage-jaune.png\",\n    iconSize: [32, 32],\n    iconAnchor: [16, 16]\n  });\n\n  // Toggle generic pentru layere meteo\n  const handleWeatherToggle = type => setWeatherState(prev => ({\n    ...prev,\n    [type]: !prev[type]\n  }));\n\n  // Simulare mișcare avioane (rulează în App pentru claritate)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setPlanes(prevPlanes => prevPlanes.map(plane => {\n        const speedKms = plane.speed * 1.852 / 3600; // knots -> km/s\n        const headingRad = plane.heading * Math.PI / 180;\n        const earthRadius = 6371; // km\n        const deltaLat = speedKms * Math.cos(headingRad) / earthRadius;\n        const deltaLon = speedKms * Math.sin(headingRad) / (earthRadius * Math.cos(plane.lat * Math.PI / 180));\n        const newLat = plane.lat + deltaLat * 180 / Math.PI;\n        const newLng = plane.lng + deltaLon * 180 / Math.PI;\n        return {\n          ...plane,\n          lat: newLat,\n          lng: newLng,\n          trail: [...plane.trail, [newLat, newLng]].slice(-350)\n        };\n      }));\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100vw\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(WeatherControls, {\n      weatherState: weatherState,\n      onWeatherToggle: handleWeatherToggle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [46, 25],\n      zoom: 7.5,\n      children: [weatherState.clouds && /*#__PURE__*/_jsxDEV(WeatherLayer, {\n        type: \"clouds\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 33\n      }, this), weatherState.wind && /*#__PURE__*/_jsxDEV(WeatherLayer, {\n        type: \"wind\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 31\n      }, this), weatherState.pressure && /*#__PURE__*/_jsxDEV(WeatherLayer, {\n        type: \"pressure\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(AircraftLayer, {\n        planes: planes,\n        planeIcon: planeIcon,\n        selectedCallsign: selectedCallsign,\n        setSelectedCallsign: setSelectedCallsign\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"6sqDet68E7IEFvqqLppToMNVdhQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","WeatherControls","WeatherLayer","AircraftLayer","L","jsxDEV","_jsxDEV","initialPlanes","icao","flight_level","lat","lng","heading","speed","callsign","trail","App","_s","weatherState","setWeatherState","clouds","wind","pressure","planes","setPlanes","selectedCallsign","setSelectedCallsign","planeIcon","Icon","iconUrl","iconSize","iconAnchor","handleWeatherToggle","type","prev","interval","setInterval","prevPlanes","map","plane","speedKms","headingRad","Math","PI","earthRadius","deltaLat","cos","deltaLon","sin","newLat","newLng","slice","clearInterval","style","height","width","children","onWeatherToggle","fileName","_jsxFileName","lineNumber","columnNumber","center","zoom","_c","$RefreshReg$"],"sources":["D:/downloads/proiecte_programare/CPDLC_simulator/cpdlc-frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport MapContainer from \"./components/Map/MapContainer\";\nimport WeatherControls from \"./components/Weather/WeatherControls\";\nimport WeatherLayer from \"./components/WeatherLayer\";\nimport AircraftLayer from \"./components/Aircraft/AircraftLayer\";\nimport L from \"leaflet\";\nimport \"leaflet-rotatedmarker\"; // plugin must be imported after leaflet\n\nconst initialPlanes = [\n  { icao: \"LZIB\", flight_level: 350, lat: 44.57, lng: 27.48, heading: 90, speed: 450, callsign: \"BUL123\", trail: [[44.57, 27.48]] },\n  { icao: \"A320\", flight_level: 320, lat: 44.87, lng: 26.48, heading: 270, speed: 430, callsign: \"BUL456\", trail: [[44.87, 26.48]] },\n  { icao: \"B737\", flight_level: 300, lat: 44.57, lng: 25.48, heading: 180, speed: 400, callsign: \"BUL789\", trail: [[44.57, 25.48]] },\n  { icao: \"C172\", flight_level: 100, lat: 45.57, lng: 24.48, heading: 0, speed: 120, callsign: \"BUL101\", trail: [[45.57, 24.48]] },\n  { icao: \"E190\", flight_level: 280, lat: 45.57, lng: 23.48, heading: 45, speed: 500, callsign: \"BUL202\", trail: [[45.57, 23.48]] },\n];\n\nconst App = () => {\n  const [weatherState, setWeatherState] = useState({\n    clouds: false,\n    wind: false,\n    pressure: false,\n  });\n\n  const [planes, setPlanes] = useState(initialPlanes);\n  const [selectedCallsign, setSelectedCallsign] = useState(null);\n\n  // Icon (poți înlocui cu local asset dacă vrei)\n  const planeIcon = new L.Icon({\n    iconUrl: \"https://icones.pro/wp-content/uploads/2021/08/symbole-d-avion-et-de-voyage-jaune.png\",\n    iconSize: [32, 32],\n    iconAnchor: [16, 16],\n  });\n\n  // Toggle generic pentru layere meteo\n  const handleWeatherToggle = (type) =>\n    setWeatherState((prev) => ({ ...prev, [type]: !prev[type] }));\n\n  // Simulare mișcare avioane (rulează în App pentru claritate)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setPlanes((prevPlanes) =>\n        prevPlanes.map((plane) => {\n          const speedKms = (plane.speed * 1.852) / 3600; // knots -> km/s\n          const headingRad = (plane.heading * Math.PI) / 180;\n          const earthRadius = 6371; // km\n          const deltaLat = (speedKms * Math.cos(headingRad)) / earthRadius;\n          const deltaLon =\n            (speedKms * Math.sin(headingRad)) /\n            (earthRadius * Math.cos((plane.lat * Math.PI) / 180));\n\n          const newLat = plane.lat + (deltaLat * 180) / Math.PI;\n          const newLng = plane.lng + (deltaLon * 180) / Math.PI;\n\n          return {\n            ...plane,\n            lat: newLat,\n            lng: newLng,\n            trail: [...plane.trail, [newLat, newLng]].slice(-350),\n          };\n        })\n      );\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div style={{ height: \"100vh\", width: \"100vw\" }}>\n      <WeatherControls weatherState={weatherState} onWeatherToggle={handleWeatherToggle} />\n\n      <MapContainer center={[46, 25]} zoom={7.5}>\n        {/* layere meteo (randate doar când sunt active) */}\n        {weatherState.clouds && <WeatherLayer type=\"clouds\" />}\n        {weatherState.wind && <WeatherLayer type=\"wind\" />}\n        {weatherState.pressure && <WeatherLayer type=\"pressure\" />}\n\n        {/* layer pentru avioane + trail */}\n        <AircraftLayer\n          planes={planes}\n          planeIcon={planeIcon}\n          selectedCallsign={selectedCallsign}\n          setSelectedCallsign={setSelectedCallsign}\n        />\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}